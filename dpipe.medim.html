

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Medim &mdash; dpipe  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="dpipe  documentation" href="index.html"/>
        <link rel="up" title="dpipe package" href="dpipe.html"/>
        <link rel="next" title="Model Core" href="dpipe.model_core.html"/>
        <link rel="prev" title="dpipe.experiment.flat package" href="dpipe.experiment.flat.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> dpipe
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="dpipe.html">dpipe package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="dpipe.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="dpipe.batch_iter.html">Batch iterators</a></li>
<li class="toctree-l3"><a class="reference internal" href="dpipe.batch_predict.html">Batch predictors</a></li>
<li class="toctree-l3"><a class="reference internal" href="dpipe.dataset.html">Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="dpipe.experiment.html">dpipe.experiment package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Medim</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.augmentation">dpipe.medim.augmentation module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.bounding_box">dpipe.medim.bounding_box module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.coregister">dpipe.medim.coregister module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.divide">dpipe.medim.divide module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.features">dpipe.medim.features module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.metrics">dpipe.medim.metrics module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.patch">dpipe.medim.patch module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.preprocessing">dpipe.medim.preprocessing module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.shape_utils">dpipe.medim.shape_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.slices">dpipe.medim.slices module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.utils">dpipe.medim.utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dpipe.medim.visualize">dpipe.medim.visualize module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dpipe.model_core.html">Model Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="dpipe.split.html">Split</a></li>
<li class="toctree-l3"><a class="reference internal" href="dpipe.tf.html">dpipe.tf package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dpipe.torch.html">dpipe.torch package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dpipe.train.html">Training</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dpipe.html#module-dpipe.commands">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="dpipe.html#module-dpipe.io">Input/Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="dpipe.html#module-dpipe.model">NN model interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="dpipe.html#module-dpipe.transformers">dpipe.transformers module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dpipe</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="dpipe.html">dpipe package</a> &raquo;</li>
        
      <li>Medim</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/dpipe.medim.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="medim">
<h1>Medim<a class="headerlink" href="#medim" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-dpipe.medim.augmentation">
<span id="dpipe-medim-augmentation-module"></span><h2>dpipe.medim.augmentation module<a class="headerlink" href="#module-dpipe.medim.augmentation" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.augmentation.elastic_transform">
<code class="descclassname">dpipe.medim.augmentation.</code><code class="descname">elastic_transform</code><span class="sig-paren">(</span><em>x</em>, <em>alpha</em>, <em>sigma</em>, <em>axes=None</em>, <em>order=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/augmentation.html#elastic_transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.augmentation.elastic_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a gaussian elastic transform to a np.array along given axes.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.augmentation.pad_slice">
<code class="descclassname">dpipe.medim.augmentation.</code><code class="descname">pad_slice</code><span class="sig-paren">(</span><em>x</em>, <em>shape</em>, <em>pad_value=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/augmentation.html#pad_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.augmentation.pad_slice" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.augmentation.random_flip">
<code class="descclassname">dpipe.medim.augmentation.</code><code class="descname">random_flip</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>axes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/augmentation.html#random_flip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.augmentation.random_flip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.augmentation.spacial_augmentation">
<code class="descclassname">dpipe.medim.augmentation.</code><code class="descname">spacial_augmentation</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>axes=None</em>, <em>order=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/augmentation.html#spacial_augmentation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.augmentation.spacial_augmentation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.augmentation.spatial_augmentation_strict">
<code class="descclassname">dpipe.medim.augmentation.</code><code class="descname">spatial_augmentation_strict</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>axes=None</em>, <em>order=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/augmentation.html#spatial_augmentation_strict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.augmentation.spatial_augmentation_strict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-dpipe.medim.bounding_box">
<span id="dpipe-medim-bounding-box-module"></span><h2>dpipe.medim.bounding_box module<a class="headerlink" href="#module-dpipe.medim.bounding_box" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.bounding_box.extract">
<code class="descclassname">dpipe.medim.bounding_box.</code><code class="descname">extract</code><span class="sig-paren">(</span><em>arrays</em>, <em>mask: numpy.ndarray</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/bounding_box.html#extract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.bounding_box.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract bounding boxes from the last dims of all arrays according to the
mask.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.bounding_box.get_idx">
<code class="descclassname">dpipe.medim.bounding_box.</code><code class="descname">get_idx</code><span class="sig-paren">(</span><em>mask: numpy.ndarray</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/bounding_box.html#get_idx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.bounding_box.get_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>Find indices of a box that contains all true values of mask, so that if
you use them in slice() you will extract box with all true values.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.bounding_box.get_slice">
<code class="descclassname">dpipe.medim.bounding_box.</code><code class="descname">get_slice</code><span class="sig-paren">(</span><em>mask: numpy.ndarray</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/bounding_box.html#get_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.bounding_box.get_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Find slices of a box that contains all true values of mask, so that if
you use them in mask[slices] you will extract box with all true values.</p>
</dd></dl>

</div>
<div class="section" id="module-dpipe.medim.coregister">
<span id="dpipe-medim-coregister-module"></span><h2>dpipe.medim.coregister module<a class="headerlink" href="#module-dpipe.medim.coregister" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.coregister.apply_transformation">
<code class="descclassname">dpipe.medim.coregister.</code><code class="descname">apply_transformation</code><span class="sig-paren">(</span><em>input_path</em>, <em>output_path</em>, <em>transform_folder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/coregister.html#apply_transformation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.coregister.apply_transformation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.coregister.copy_header">
<code class="descclassname">dpipe.medim.coregister.</code><code class="descname">copy_header</code><span class="sig-paren">(</span><em>image</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/coregister.html#copy_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.coregister.copy_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new nifty image from <cite>data</cite>, using the <cite>image</cite>&#8216;s header.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>image</strong> (<em>nibabel Nifti image</em>) &#8211; </li>
<li><strong>data</strong> (<em>np.array</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.coregister.coregister">
<code class="descclassname">dpipe.medim.coregister.</code><code class="descname">coregister</code><span class="sig-paren">(</span><em>result_path: str, masks_paths: typing.Sequence[str], modalities_paths: typing.Sequence[str], ref_path: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/coregister.html#coregister"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.coregister.coregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a coregistration transformation and applies it to all the images
taking the lesion masks into account.</p>
<p>The initial transformation will be calculated based on the first entry in
masks_paths and modalities_paths.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>result_path</strong> (<em>str</em>) &#8211; Path to the transformation results folder</li>
<li><strong>masks_paths</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>) &#8211; Paths to the lesion masks. Note that the first mask will be used to calculate
the coregistration mapping.</li>
<li><strong>modalities_paths</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>) &#8211; Paths to the brain images. Note that the first image will be used to calculate
the coregistration mapping.</li>
<li><strong>ref_path</strong> (<em>str</em>) &#8211; Path to the reference image which is used as the coregistration target</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Be sure to add ANTSPATH to the path before running the script</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.coregister.create_transformation">
<code class="descclassname">dpipe.medim.coregister.</code><code class="descname">create_transformation</code><span class="sig-paren">(</span><em>source</em>, <em>reference</em>, <em>neg_mask</em>, <em>result_folder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/coregister.html#create_transformation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.coregister.create_transformation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.coregister.invert_mask">
<code class="descclassname">dpipe.medim.coregister.</code><code class="descname">invert_mask</code><span class="sig-paren">(</span><em>input_path</em>, <em>output_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/coregister.html#invert_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.coregister.invert_mask" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-dpipe.medim.divide">
<span id="dpipe-medim-divide-module"></span><h2>dpipe.medim.divide module<a class="headerlink" href="#module-dpipe.medim.divide" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.divide.combine">
<code class="descclassname">dpipe.medim.divide.</code><code class="descname">combine</code><span class="sig-paren">(</span><em>x_parts</em>, <em>x_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/divide.html#combine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.divide.combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines parts of one big array of shape x_shape back into one array.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.divide.compute_n_parts_per_axis">
<code class="descclassname">dpipe.medim.divide.</code><code class="descname">compute_n_parts_per_axis</code><span class="sig-paren">(</span><em>x_shape</em>, <em>patch_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/divide.html#compute_n_parts_per_axis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.divide.compute_n_parts_per_axis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.divide.divide">
<code class="descclassname">dpipe.medim.divide.</code><code class="descname">divide</code><span class="sig-paren">(</span><em>x: numpy.ndarray</em>, <em>patch_size</em>, <em>intersection_size</em>, <em>padding_values=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/divide.html#divide"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.divide.divide" title="Permalink to this definition">¶</a></dt>
<dd><p>Divides x into multiple patches of patch_size shape with intersections of
size intersection_size. To provide values on boarders, perform padding with
values from padding_values, which has to be broadcastable to x shape.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.divide.divide_grid_patch">
<code class="descclassname">dpipe.medim.divide.</code><code class="descname">divide_grid_patch</code><span class="sig-paren">(</span><em>x</em>, <em>patch_size</em>, <em>spatial_dims=None</em>, <em>stride=None</em>, <em>padding=0</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="_modules/dpipe/medim/divide.html#divide_grid_patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.divide.divide_grid_patch" title="Permalink to this definition">¶</a></dt>
<dd><p>A convolution-like approach to generating patches from a tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>np.array</em>) &#8211; the input tensor</li>
<li><strong>patch_size</strong> &#8211; </li>
<li><strong>spatial_dims</strong> &#8211; dimensions along which the slices will be taken</li>
<li><strong>stride</strong> &#8211; the stride (step-size) of the slice</li>
<li><strong>padding</strong> &#8211; padding sizes of the input tensor</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last"><strong>x_patch</strong> (<em>np.ndarray</em>) &#8211; patches from the input tensor</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.divide.divide_no_padding">
<code class="descclassname">dpipe.medim.divide.</code><code class="descname">divide_no_padding</code><span class="sig-paren">(</span><em>x: numpy.ndarray</em>, <em>patch_size</em>, <em>intersection_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/divide.html#divide_no_padding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.divide.divide_no_padding" title="Permalink to this definition">¶</a></dt>
<dd><p>Divides padded x (should be padded beforehand) into multiple patches of
patch_size shape with intersections of size intersection_size.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.divide.divide_spatial">
<code class="descclassname">dpipe.medim.divide.</code><code class="descname">divide_spatial</code><span class="sig-paren">(</span><em>x: numpy.ndarray</em>, <em>*</em>, <em>spatial_patch_size</em>, <em>spatial_intersection_size</em>, <em>padding_values=None</em>, <em>spatial_dims: list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/divide.html#divide_spatial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.divide.divide_spatial" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.divide.get_grid_patch_start_stop">
<code class="descclassname">dpipe.medim.divide.</code><code class="descname">get_grid_patch_start_stop</code><span class="sig-paren">(</span><em>shape</em>, <em>kernel_size</em>, <em>spatial_dims=None</em>, <em>stride=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/divide.html#get_grid_patch_start_stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.divide.get_grid_patch_start_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>A convolution-like approach to generating slices from a tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> &#8211; the input tensor&#8217;s shape</li>
<li><strong>kernel_size</strong> &#8211; </li>
<li><strong>spatial_dims</strong> &#8211; dimensions along which the slices will be taken</li>
<li><strong>stride</strong> &#8211; the stride (step-size) of the slice. If None, the stride is assumed
to be equal to kernel_size.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last"><strong>start,stop</strong> (<em>tuple</em>) &#8211; coordinates of a slice&#8217;s start and stop</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-dpipe.medim.features">
<span id="dpipe-medim-features-module"></span><h2>dpipe.medim.features module<a class="headerlink" href="#module-dpipe.medim.features" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.features.get_coordinate_features">
<code class="descclassname">dpipe.medim.features.</code><code class="descname">get_coordinate_features</code><span class="sig-paren">(</span><em>shape</em>, <em>center_idx</em>, <em>patch_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/features.html#get_coordinate_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.features.get_coordinate_features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-dpipe.medim.metrics">
<span id="dpipe-medim-metrics-module"></span><h2>dpipe.medim.metrics module<a class="headerlink" href="#module-dpipe.medim.metrics" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.metrics.aggregate_metric">
<code class="descclassname">dpipe.medim.metrics.</code><code class="descname">aggregate_metric</code><span class="sig-paren">(</span><em>xs</em>, <em>ys</em>, <em>metric</em>, <em>aggregate_fn=&lt;function mean&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/metrics.html#aggregate_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.metrics.aggregate_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metric for array of objects from metric on couple of objects.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.metrics.calc_max_dices">
<code class="descclassname">dpipe.medim.metrics.</code><code class="descname">calc_max_dices</code><span class="sig-paren">(</span><em>true_masks: typing.Sequence</em>, <em>predicted_masks: typing.Sequence</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/dpipe/medim/metrics.html#calc_max_dices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.metrics.calc_max_dices" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the dice score between the true and predicted masks.
The threshold is selected to maximize the mean dice.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>true_masks</strong> (<em>bool tensor</em>) &#8211; </li>
<li><strong>predicted_masks</strong> (<em>float tensor</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>dice_score</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.metrics.compute_dices_from_msegm_prob">
<code class="descclassname">dpipe.medim.metrics.</code><code class="descname">compute_dices_from_msegm_prob</code><span class="sig-paren">(</span><em>msegm_true</em>, <em>msegm_prob</em>, <em>empty_val: float = 1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/metrics.html#compute_dices_from_msegm_prob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.metrics.compute_dices_from_msegm_prob" title="Permalink to this definition">¶</a></dt>
<dd><p>Channelwise dice score between msegms for predicted msegm and true msegm.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.metrics.compute_dices_from_segm_prob">
<code class="descclassname">dpipe.medim.metrics.</code><code class="descname">compute_dices_from_segm_prob</code><span class="sig-paren">(</span><em>segm_true</em>, <em>segm_prob</em>, <em>segm2msegm</em>, <em>empty_val: float = 1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/metrics.html#compute_dices_from_segm_prob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.metrics.compute_dices_from_segm_prob" title="Permalink to this definition">¶</a></dt>
<dd><p>Channelwise dice score between msegms for predicted segmentation and true segmentation.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.metrics.dice_score">
<code class="descclassname">dpipe.medim.metrics.</code><code class="descname">dice_score</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>empty_val: float = 1</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/dpipe/medim/metrics.html#dice_score"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.metrics.dice_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Dice score between two binary masks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong><strong>,</strong><strong>y</strong> (<em>binary tensor</em>) &#8211; </li>
<li><strong>empty_val</strong> (<em>float</em><em>, </em><em>optional</em>) &#8211; Default value, which is returned if the dice score
is undefined (i.e. division by zero).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>dice_score</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.metrics.hausdorff">
<code class="descclassname">dpipe.medim.metrics.</code><code class="descname">hausdorff</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>weights: typing.Union[float</em>, <em>typing.Sequence] = 1</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/dpipe/medim/metrics.html#hausdorff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.metrics.hausdorff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the Hausdorff distance between two masks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong><strong>,</strong><strong>b</strong> (<em>bool tensor</em>) &#8211; The tensors containing the masks. The tensors dimensionality must match.</li>
<li><strong>weights</strong> (<em>number</em><em>, </em><em>Sequence</em>) &#8211; The weight along each axis (for anisotropic grids). If array, its length must
match the dimensionality of the arrays. If number, all the axes will have the same weight</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<dl class="docutils">
<dt>Before using this module, install the dependencies:</dt>
<dd>&gt; git clone <a class="reference external" href="https://github.com/mavillan/py-hausdorff.git">https://github.com/mavillan/py-hausdorff.git</a>
&gt; pip install Cython
&gt; cd py-hausdorff
&gt; python setup.py build &amp;&amp; python setup.py install</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hausdorff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># isotropic, but weighted</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hausdorff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span> <span class="c1"># anisotropic</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.metrics.multichannel_dice_score">
<code class="descclassname">dpipe.medim.metrics.</code><code class="descname">multichannel_dice_score</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>empty_val: float = 1</em><span class="sig-paren">)</span> &#x2192; [&lt;class 'float'&gt;]<a class="reference internal" href="_modules/dpipe/medim/metrics.html#multichannel_dice_score"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.metrics.multichannel_dice_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Channelwise dice score between two binary masks.
The first dimension of the tensors is assumed to be the channels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong><strong>,</strong><strong>b</strong> (<em>binary tensor</em>) &#8211; </li>
<li><strong>empty_val</strong> (<em>float</em><em>, </em><em>optional</em>) &#8211; Default value, which is returned if the dice score
is undefined (i.e. division by zero).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>dice_score</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">[float]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-dpipe.medim.patch">
<span id="dpipe-medim-patch-module"></span><h2>dpipe.medim.patch module<a class="headerlink" href="#module-dpipe.medim.patch" title="Permalink to this headline">¶</a></h2>
<p>Tools for patch extraction and generation
For even patch sizes, center is always considered to be close to the right border</p>
<dl class="function">
<dt id="dpipe.medim.patch.extract_patch">
<code class="descclassname">dpipe.medim.patch.</code><code class="descname">extract_patch</code><span class="sig-paren">(</span><em>x: numpy.ndarray</em>, <em>*</em>, <em>spatial_center_idx: &lt;built-in function array&gt;</em>, <em>spatial_patch_size: &lt;built-in function array&gt;</em>, <em>spatial_dims: list</em>, <em>padding_values: &lt;built-in function array&gt; = None</em><span class="sig-paren">)</span> &#x2192; &lt;built-in function array&gt;<a class="reference internal" href="_modules/dpipe/medim/patch.html#extract_patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.patch.extract_patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns extracted patch of specific spatial size and with specified
center from x.
:param x: Array with data. Some of it&#8217;s dimensions are spatial. We extract</p>
<blockquote>
<div>spatial patch specified by spatial location and spatial size.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>spatial_center_idx</strong> &#8211; Location of the center of the patch. Components
correspond to spatial dimensions. If some of patch size components was
even, patch center is supposed to be on the right center pixel.</li>
<li><strong>spatial_patch_size</strong> &#8211; Spatial patch size. Output will have original shape for
non-spatial dimensions and patch_size shape for spatial dimensions.</li>
<li><strong>spatial_dims</strong> &#8211; Which of x&#8217;s dimensions be consider as spatial. Accepts
negative parameters.</li>
<li><strong>padding_values</strong> &#8211; Defines values, that will fill padding. Have to be broadcastable to
the resulting patch shape. By default no broadcasting is allowed.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Patch extracted from x, padded, if necessary.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.patch.find_masked_patch_center_indices">
<code class="descclassname">dpipe.medim.patch.</code><code class="descname">find_masked_patch_center_indices</code><span class="sig-paren">(</span><em>mask: &lt;built-in function array&gt;</em>, <em>patch_size: &lt;built-in function array&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/patch.html#find_masked_patch_center_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.patch.find_masked_patch_center_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array with spatial center indices for patches that completely
belong to spatial_mask and spatial voxel mask is activated.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.patch.find_patch_start_end_padding">
<code class="descclassname">dpipe.medim.patch.</code><code class="descname">find_patch_start_end_padding</code><span class="sig-paren">(</span><em>shape: numpy.ndarray</em>, <em>*</em>, <em>spatial_center_idx: &lt;built-in function array&gt;</em>, <em>spatial_patch_size: &lt;built-in function array&gt;</em>, <em>spatial_dims: list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/patch.html#find_patch_start_end_padding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.patch.find_patch_start_end_padding" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.patch.get_random_patch">
<code class="descclassname">dpipe.medim.patch.</code><code class="descname">get_random_patch</code><span class="sig-paren">(</span><em>x: numpy.ndarray</em>, <em>patch_size</em>, <em>spatial_dims=None</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="_modules/dpipe/medim/patch.html#get_random_patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.patch.get_random_patch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.patch.get_random_patch_start_stop">
<code class="descclassname">dpipe.medim.patch.</code><code class="descname">get_random_patch_start_stop</code><span class="sig-paren">(</span><em>shape</em>, <em>patch_size</em>, <em>spatial_dims=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/patch.html#get_random_patch_start_stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.patch.get_random_patch_start_stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.patch.pad">
<code class="descclassname">dpipe.medim.patch.</code><code class="descname">pad</code><span class="sig-paren">(</span><em>x</em>, <em>padding</em>, <em>padding_values</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/patch.html#pad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.patch.pad" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.patch.sample_uniform_center_index">
<code class="descclassname">dpipe.medim.patch.</code><code class="descname">sample_uniform_center_index</code><span class="sig-paren">(</span><em>x_shape: &lt;built-in function array&gt;</em>, <em>spatial_patch_size: &lt;built-in function array&gt;</em>, <em>spatial_dims: list</em><span class="sig-paren">)</span> &#x2192; &lt;built-in function array&gt;<a class="reference internal" href="_modules/dpipe/medim/patch.html#sample_uniform_center_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.patch.sample_uniform_center_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns spatial center coordinates for the patch, chosen randomly.
We assume that patch have to belong to the object boundaries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_shape</strong> &#8211; Object shape.</li>
<li><strong>spatial_patch_size</strong> &#8211; Size of the required patch</li>
<li><strong>spatial_dims</strong> &#8211; Elements from x_shape that correspond to spatial dims. Can be negative.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Center indices for spatial dims. If patch size was even, center index
is shifted to the right.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-dpipe.medim.preprocessing">
<span id="dpipe-medim-preprocessing-module"></span><h2>dpipe.medim.preprocessing module<a class="headerlink" href="#module-dpipe.medim.preprocessing" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.preprocessing.normalize_mscan">
<code class="descclassname">dpipe.medim.preprocessing.</code><code class="descname">normalize_mscan</code><span class="sig-paren">(</span><em>mscan</em>, <em>mean=True</em>, <em>std=True</em>, <em>drop_percentile: int = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/preprocessing.html#normalize_mscan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.preprocessing.normalize_mscan" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize multimodal scan (each modality independently) to make mean and std equal to (0, 1) if stated.
Supports robust estimation with drop_percentile.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.preprocessing.normalize_scan">
<code class="descclassname">dpipe.medim.preprocessing.</code><code class="descname">normalize_scan</code><span class="sig-paren">(</span><em>scan</em>, <em>mean=True</em>, <em>std=True</em>, <em>drop_percentile: int = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/preprocessing.html#normalize_scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.preprocessing.normalize_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize scan to make mean and std equal to (0, 1) if stated.
Supports robust estimation with drop_percentile.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.preprocessing.pad_to_shape">
<code class="descclassname">dpipe.medim.preprocessing.</code><code class="descname">pad_to_shape</code><span class="sig-paren">(</span><em>x: &lt;built-in function array&gt;</em>, <em>spatial_shape: typing.Sequence</em>, <em>axes: typing.Sequence = None</em>, <em>strict: bool = True</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="_modules/dpipe/medim/preprocessing.html#pad_to_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.preprocessing.pad_to_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad a tensor to <cite>spacial_shape</cite> along the <cite>axes</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>np.array</em>) &#8211; tensor to pad</li>
<li><strong>spatial_shape</strong> (<em>Sequence</em>) &#8211; final image shape</li>
<li><strong>axes</strong> (<em>Sequence</em><em>, </em><em>optional</em>) &#8211; axes along which the image will be padded.
If None - the last <cite>len(spacial_shape)</cite> axes are used.</li>
<li><strong>strict</strong> (<em>bool</em><em>, </em><em>optional</em>) &#8211; If True, the output shape cannot be smaller than the input shape.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>padded_tensor</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.preprocessing.rotate_image">
<code class="descclassname">dpipe.medim.preprocessing.</code><code class="descname">rotate_image</code><span class="sig-paren">(</span><em>image: numpy.ndarray</em>, <em>angles: typing.Sequence</em>, <em>axes: typing.Sequence = None</em>, <em>order: int = 1</em>, <em>reshape=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/preprocessing.html#rotate_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.preprocessing.rotate_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate an image along the given axes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<em>np.ndarray</em>) &#8211; image to rotate</li>
<li><strong>angles</strong> (<em>Sequence</em>) &#8211; </li>
<li><strong>axes</strong> (<em>Sequence</em>) &#8211; axes along which the image will be rotated. The length must be equal to len(angles) + 1</li>
<li><strong>order</strong> (<em>int</em><em>, </em><em>optional</em>) &#8211; interpolation order</li>
<li><strong>reshape</strong> (<em>bool</em><em>, </em><em>optional</em>) &#8211; whether to reshape the resulting image</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>rotated_image</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.preprocessing.scale">
<code class="descclassname">dpipe.medim.preprocessing.</code><code class="descname">scale</code><span class="sig-paren">(</span><em>image: &lt;built-in function array&gt;</em>, <em>spatial_shape: list</em>, <em>order: int = 3</em>, <em>axes: list = None</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="_modules/dpipe/medim/preprocessing.html#scale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.preprocessing.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Rescale image to <cite>spacial_shape</cite> along the <cite>axes</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<em>np.array</em>) &#8211; image to rescale</li>
<li><strong>spatial_shape</strong> (<em>Sequence</em>) &#8211; final image shape</li>
<li><strong>order</strong> (<em>int</em><em>, </em><em>optional</em>) &#8211; order of interpolation</li>
<li><strong>axes</strong> (<em>Sequence</em><em>, </em><em>optional</em>) &#8211; axes along which the image will be scaled.
If None - the last <cite>len(spacial_shape)</cite> axes are used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>reshaped image</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.preprocessing.slice_to_shape">
<code class="descclassname">dpipe.medim.preprocessing.</code><code class="descname">slice_to_shape</code><span class="sig-paren">(</span><em>x: &lt;built-in function array&gt;</em>, <em>spatial_shape: typing.Sequence</em>, <em>axes: typing.Sequence = None</em>, <em>strict: bool = True</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="_modules/dpipe/medim/preprocessing.html#slice_to_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.preprocessing.slice_to_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice a tensor to <cite>spacial_shape</cite> along the <cite>axes</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>np.array</em>) &#8211; tensor to pad</li>
<li><strong>spatial_shape</strong> (<em>Sequence</em>) &#8211; final image shape</li>
<li><strong>axes</strong> (<em>Sequence</em><em>, </em><em>optional</em>) &#8211; axes along which the image will be padded.
If None - the last <cite>len(spacial_shape)</cite> axes are used.</li>
<li><strong>strict</strong> (<em>bool</em><em>, </em><em>optional</em>) &#8211; If True, the output shape cannot be smaller than the input shape.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tensor_slice</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-dpipe.medim.shape_utils">
<span id="dpipe-medim-shape-utils-module"></span><h2>dpipe.medim.shape_utils module<a class="headerlink" href="#module-dpipe.medim.shape_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.shape_utils.broadcast_shape">
<code class="descclassname">dpipe.medim.shape_utils.</code><code class="descname">broadcast_shape</code><span class="sig-paren">(</span><em>x_shape</em>, <em>y_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/shape_utils.html#broadcast_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.shape_utils.broadcast_shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.shape_utils.broadcast_shape_nd">
<code class="descclassname">dpipe.medim.shape_utils.</code><code class="descname">broadcast_shape_nd</code><span class="sig-paren">(</span><em>shape</em>, <em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/shape_utils.html#broadcast_shape_nd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.shape_utils.broadcast_shape_nd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.shape_utils.compute_shape_from_spatial">
<code class="descclassname">dpipe.medim.shape_utils.</code><code class="descname">compute_shape_from_spatial</code><span class="sig-paren">(</span><em>complete_shape</em>, <em>spatial_shape</em>, <em>spatial_dims</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/shape_utils.html#compute_shape_from_spatial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.shape_utils.compute_shape_from_spatial" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.shape_utils.shape_after_convolution">
<code class="descclassname">dpipe.medim.shape_utils.</code><code class="descname">shape_after_convolution</code><span class="sig-paren">(</span><em>shape</em>, <em>kernel_size</em>, <em>padding=0</em>, <em>stride=1</em>, <em>dilation=1</em><span class="sig-paren">)</span> &#x2192; tuple<a class="reference internal" href="_modules/dpipe/medim/shape_utils.html#shape_after_convolution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.shape_utils.shape_after_convolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the shape of a tensor after applying a the convolution with
corresponding parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> &#8211; input shape</li>
<li><strong>kernel_size</strong> &#8211; convolution kernel size</li>
<li><strong>padding</strong> &#8211; padding sizes</li>
<li><strong>stride</strong> &#8211; stride of the convolution</li>
<li><strong>dilation</strong> &#8211; dilation of the convolution kernel</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>output_shape</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-dpipe.medim.slices">
<span id="dpipe-medim-slices-module"></span><h2>dpipe.medim.slices module<a class="headerlink" href="#module-dpipe.medim.slices" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.slices.iterate_slices">
<code class="descclassname">dpipe.medim.slices.</code><code class="descname">iterate_slices</code><span class="sig-paren">(</span><em>*data</em>, <em>axis: int = -1</em>, <em>slices: typing.Union[int</em>, <em>typing.List[int]] = 1</em>, <em>pad: typing.Union[int</em>, <em>typing.List[int]] = 0</em>, <em>concatenate: int = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/slices.html#iterate_slices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.slices.iterate_slices" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over slices of a series of tensors along a given axis.</p>
<p>data: Sequence
axis: int, optional
slices: int, List[int], optional</p>
<blockquote>
<div>The number of slices to yield</div></blockquote>
<dl class="docutils">
<dt>pad: int, List[int], optional</dt>
<dd>Padding along the specified axis</dd>
<dt>concatenate <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd>If specified, the slices will be concatenated instead of stacked</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.slices.join_result">
<code class="descclassname">dpipe.medim.slices.</code><code class="descname">join_result</code><span class="sig-paren">(</span><em>stacks</em>, <em>axis</em>, <em>concatenate</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/slices.html#join_result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.slices.join_result" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-dpipe.medim.utils">
<span id="dpipe-medim-utils-module"></span><h2>dpipe.medim.utils module<a class="headerlink" href="#module-dpipe.medim.utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.utils.build_slices">
<code class="descclassname">dpipe.medim.utils.</code><code class="descname">build_slices</code><span class="sig-paren">(</span><em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/utils.html#build_slices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.utils.build_slices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.utils.get_axes">
<code class="descclassname">dpipe.medim.utils.</code><code class="descname">get_axes</code><span class="sig-paren">(</span><em>axes</em>, <em>ndim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/utils.html#get_axes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.utils.get_axes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.utils.load_by_ids">
<code class="descclassname">dpipe.medim.utils.</code><code class="descname">load_by_ids</code><span class="sig-paren">(</span><em>*loaders</em>, <em>ids: typing.Sequence</em>, <em>shuffle: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/utils.html#load_by_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.utils.load_by_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields pairs of objects given their loaders and ids</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>loaders</strong> (<em>List</em><em>[</em><em>callable</em><em>(</em><em>id</em><em>)</em><em>]</em>) &#8211; Loaders for x and y</li>
<li><strong>ids</strong> (<em>Sequence</em>) &#8211; a sequence of ids to load</li>
<li><strong>shuffle</strong> (<em>bool</em><em>, </em><em>optional</em>) &#8211; whether to shuffle the ids before yielding</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.utils.load_image">
<code class="descclassname">dpipe.medim.utils.</code><code class="descname">load_image</code><span class="sig-paren">(</span><em>path: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/utils.html#load_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.utils.load_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an image located at <cite>path</cite>.
The following extensions are supported:</p>
<blockquote>
<div>npy, tif, hdr, img, nii, nii.gz</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>str</em>) &#8211; Path to the image.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-dpipe.medim.visualize">
<span id="dpipe-medim-visualize-module"></span><h2>dpipe.medim.visualize module<a class="headerlink" href="#module-dpipe.medim.visualize" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="dpipe.medim.visualize.gray_image_bright_colored_mask">
<code class="descclassname">dpipe.medim.visualize.</code><code class="descname">gray_image_bright_colored_mask</code><span class="sig-paren">(</span><em>gray_image</em>, <em>mask</em>, <em>hue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/visualize.html#gray_image_bright_colored_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.visualize.gray_image_bright_colored_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates gray image with colored mask. Changes mask intensities,
so dark areas on gray image will be easy to see after colorization.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.visualize.gray_image_colored_mask">
<code class="descclassname">dpipe.medim.visualize.</code><code class="descname">gray_image_colored_mask</code><span class="sig-paren">(</span><em>gray_image</em>, <em>mask</em>, <em>hue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/visualize.html#gray_image_colored_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.visualize.gray_image_colored_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates gray image with colored mask. Keeps intensities intact,
so dark areas on gray image will be hard to see even after colorization.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.visualize.hsv_image">
<code class="descclassname">dpipe.medim.visualize.</code><code class="descname">hsv_image</code><span class="sig-paren">(</span><em>hue</em>, <em>saturation</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/visualize.html#hsv_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.visualize.hsv_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates image in HSV format from HSV data.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.visualize.rgb_from_hsv_data">
<code class="descclassname">dpipe.medim.visualize.</code><code class="descname">rgb_from_hsv_data</code><span class="sig-paren">(</span><em>hue</em>, <em>saturation</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/visualize.html#rgb_from_hsv_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.visualize.rgb_from_hsv_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates image in RGB format from HSV data.</p>
</dd></dl>

<dl class="function">
<dt id="dpipe.medim.visualize.segmentation_probabilities">
<code class="descclassname">dpipe.medim.visualize.</code><code class="descname">segmentation_probabilities</code><span class="sig-paren">(</span><em>image</em>, <em>probabilities</em>, <em>hue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/visualize.html#segmentation_probabilities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.visualize.segmentation_probabilities" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="dpipe.medim.visualize.slice3d">
<code class="descclassname">dpipe.medim.visualize.</code><code class="descname">slice3d</code><span class="sig-paren">(</span><em>*data</em>, <em>axis: int = -1</em>, <em>fig_size: int = 5</em>, <em>max_columns: int = None</em>, <em>colorbar: bool = False</em>, <em>cmap: str = None</em>, <em>vlim=(None</em>, <em>None)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dpipe/medim/visualize.html#slice3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dpipe.medim.visualize.slice3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an interactive plot, simultaneously showing slices along a given
axis for all the passed images.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> (<em>list of numpy arrays</em>) &#8211; </li>
<li><strong>axis</strong> (<em>the axis along which the slices will be taken</em>) &#8211; </li>
<li><strong>fig_size</strong> (<em>the size of the image of a single slice</em>) &#8211; </li>
<li><strong>max_columns</strong> (<em>the maximal number of figures in a row.</em>) &#8211; None - all figures will be in the same row.</li>
<li><strong>colorbar</strong> (<em>Whether to display a colorbar.</em>) &#8211; </li>
<li><strong>cmap</strong><strong>,</strong><strong>vlim</strong> (<em>parameters passed to matplotlib.pyplot.imshow</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dpipe.model_core.html" class="btn btn-neutral float-right" title="Model Core" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dpipe.experiment.flat.html" class="btn btn-neutral" title="dpipe.experiment.flat package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Author.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>